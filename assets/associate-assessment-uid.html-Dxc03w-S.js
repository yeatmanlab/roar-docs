import{_ as e,c as s,o as a,e as t}from"./app-CCUGpHe7.js";const n={},i=t(`<h1 id="associateassessmentuid" tabindex="-1"><a class="header-anchor" href="#associateassessmentuid"><span>associateassessmentuid()</span></a></h1><h4 id="associateassessmentuid-1" tabindex="-1"><a class="header-anchor" href="#associateassessmentuid-1"><span><a href="https://github.com/yeatmanlab/roar-firebase-functions/blob/e784650492722d24069aa9b0704d1873ea5dafee/gse-roar-admin/functions/src/index.ts#L187" target="_blank" rel="noopener noreferrer">associateassessmentuid</a></span></a></h4><h3 id="function-name" tabindex="-1"><a class="header-anchor" href="#function-name"><span>Function Name</span></a></h3><p><code>associateassessmentuid</code></p><h3 id="trigger" tabindex="-1"><a class="header-anchor" href="#trigger"><span>Trigger</span></a></h3><p>This Cloud Function is triggered by a direct call (onCall). It expects to be invoked typically through a client-side request within your application.</p><h3 id="inputs" tabindex="-1"><a class="header-anchor" href="#inputs"><span>Inputs</span></a></h3><p>The function expects a JSON payload containing the following keys:</p><ul><li><strong>adminUid</strong>: A string that represents the unique identifier of an administrator. This UID is intended to specify which administrator is performing the operation or whose data is being accessed or modified.</li><li><strong>assessmentUid</strong>: A string that represents the unique identifier of an assessment. This UID is used to associate a specific assessment with an administrator.</li></ul><p>Example JSON input:</p><div class="language-json line-numbers-mode" data-highlighter="prismjs" data-ext="json" data-title="json"><pre><code><span class="line"><span class="token punctuation">{</span></span>
<span class="line">  <span class="token property">&quot;adminUid&quot;</span><span class="token operator">:</span> <span class="token string">&quot;admin123&quot;</span><span class="token punctuation">,</span></span>
<span class="line">  <span class="token property">&quot;assessmentUid&quot;</span><span class="token operator">:</span> <span class="token string">&quot;assessment456&quot;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="outputs" tabindex="-1"><a class="header-anchor" href="#outputs"><span>Outputs</span></a></h3><p>The function returns the result of the <code>associateAssessmentUid</code> operation. This output can be:</p><ul><li>A success message or object indicating that the association was successfully created or updated.</li><li>An error message or object indicating that the operation failed, which may include reasons for the failure (e.g., invalid UIDs, permission issues, database errors).</li></ul><h3 id="description" tabindex="-1"><a class="header-anchor" href="#description"><span>Description</span></a></h3><p>The <code>associateassessmentuid</code> function is designed to create or update the association between a user&#39;s authentication UID in the &quot;admin&quot; and &quot;assessment&quot; Firebase projects. This is part of managing access to ROAR two separate Firebase projects: <code>gse-roar-admin</code> and <code>gse-roar-assessment</code>. The function takes the UIDs for both admin and assessment projects and updates relevant records in the database.</p><h3 id="error-handling" tabindex="-1"><a class="header-anchor" href="#error-handling"><span>Error Handling</span></a></h3><p>This function should include error handling to manage and log various failure scenarios, such as:</p><ul><li>Non-existent <code>adminUid</code> or <code>assessmentUid</code></li><li>Database connection issues</li><li>Permission errors if the requestor does not have the right to associate these UIDs</li><li>Any unexpected exceptions</li></ul><p>Errors should be logged appropriately and, where feasible, detailed error information should be returned to the caller to facilitate troubleshooting without exposing sensitive system details.</p><h3 id="security-considerations" tabindex="-1"><a class="header-anchor" href="#security-considerations"><span>Security Considerations</span></a></h3><ul><li><strong>Authentication</strong>: The function checks that the request is made by an authenticated user.</li><li><strong>Authorization</strong>: The function should verify that the requester has the appropriate administrative rights to associate an administrator UID with an assessment UID.</li><li><strong>Data Validation</strong>: Ensure that both <code>adminUid</code> and <code>assessmentUid</code> are valid and formatted correctly before attempting any operations with them.</li></ul><h3 id="deployment" tabindex="-1"><a class="header-anchor" href="#deployment"><span>Deployment</span></a></h3><p>This function is deployed automatically using GitHub actions, whenever changes are merged into the <code>main</code> branch.</p>`,24),o=[i];function r(d,l){return a(),s("div",null,o)}const u=e(n,[["render",r],["__file","associate-assessment-uid.html.vue"]]),h=JSON.parse('{"path":"/cloud-functions/gse-roar-admin/associate-assessment-uid.html","title":"associateassessmentuid()","lang":"en-US","frontmatter":{},"headers":[{"level":3,"title":"Function Name","slug":"function-name","link":"#function-name","children":[]},{"level":3,"title":"Trigger","slug":"trigger","link":"#trigger","children":[]},{"level":3,"title":"Inputs","slug":"inputs","link":"#inputs","children":[]},{"level":3,"title":"Outputs","slug":"outputs","link":"#outputs","children":[]},{"level":3,"title":"Description","slug":"description","link":"#description","children":[]},{"level":3,"title":"Error Handling","slug":"error-handling","link":"#error-handling","children":[]},{"level":3,"title":"Security Considerations","slug":"security-considerations","link":"#security-considerations","children":[]},{"level":3,"title":"Deployment","slug":"deployment","link":"#deployment","children":[]}],"git":{"updatedTime":1714409333000,"contributors":[{"name":"Kyle Montville","email":"kmontvil@stanford.edu","commits":2},{"name":"Kyle","email":"ksmontville@gmail.com","commits":1}]},"filePathRelative":"cloud-functions/gse-roar-admin/associate-assessment-uid.md"}');export{u as comp,h as data};
