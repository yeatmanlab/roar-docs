import{_ as a,c as s,f as i,d as n,o,r}from"./app-FrdTVLMr.js";const l={};function d(h,e){const t=r("Mermaid");return o(),s("div",null,[e[0]||(e[0]=i('<h1 id="user-roster-changes" tabindex="-1"><a class="header-anchor" href="#user-roster-changes"><span>User Roster Changes</span></a></h1><p>ROAR user data is stored in multiple locations. It is:</p><ul><li>Stored in the Firestore user documents in the <code>/users</code> collection,</li><li>Denormalized into Firestore assignment documents in the <code>/users/{userId}/assignments</code> collection. This data is meant to capture the user&#39;s data at the time that the assignment is closed.</li><li>&quot;Snapshotted&quot; into Firestore run documents in the <code>/users/{userId}/runs</code> collection. By &quot;snapshotted&quot;, we mean that the user&#39;s data is copied into the run documents at the start of each run.</li></ul><p>Note that the denormalized data in the <code>/users/{userId}/assignments</code> collection will be deprecated when we migrate to a Postgres database.</p><p>ROAR users information can be updated in three ways:</p><ul><li>ROAR, via CSV upload by a ROAR administrator,</li><li>Clever, via a cloud function that uses the Clever API to sync organizations and their users, and</li><li>ClassLink, via a similar cloud function that syncs organizations and their users.</li></ul><p>When a user&#39;s information changes in these service providers, the ROAR platform must update its own internal information accordingly. Most user information (such as name) can simply be updated in a user&#39;s Firestore documents. However, changes to the following fields must be handled differently:</p><ul><li>date of birth (DOB), and therefore age</li><li>grade</li><li>organizational affiliation of any kind (districts, schools, classes, etc.)</li></ul><p>Changes to these fields can affect conditional assignment and scoring and must therefore be handled differently.</p><ul><li>We assume that a change to a user&#39;s DOB represents a correction to a clerical error and must be updated in all relevant database entities.</li><li>We assume that a change to a user&#39;s grade represents matriculation and must be updated only in the user&#39;s database entity and any open assignments.</li><li>Lastly, we assume that a change to a user&#39;s rostering organizations represents a change in affiliation and must be updated only in the user&#39;s database entity and in open assignments.</li></ul><p>We follow this rostering change flowchart to determine what to update when these fields change.</p>',11)),n(t,{id:"mermaid-89",code:"eJytlM9u2zAMxu99CqJAsfaQ9g02ZM2WHbYUSJbDYASDEjO2MFsyJHlFtu7dR1GS/yXoYdghsUXRP1LfR7swoinh6+IKwElXYXa9cW2OysFaW4cGHkuhCrTXuytKubmBbZMLh0DP5QiNcCWFN04Yd5vxZXcHs9lb2HJCNszeUWYIh4zlURq0ThvMaIf2hmSpOPbQWjQWhMpBNxhjwlpZqJqatBRgbM9i9tIzHks8/PjNj3wSFjwJ9hghjdG1dkjY1oE+ckyoU19lUOQdBf7Qr6dykZfrb6TLC2xVyF3GY8QlHKkER1yJFqfQ2PkZc6UJ+UHltxn97e784RKfMyhKsZEXi6f3rzmR633ygTJZLgqFvcVlDzxx5EDUJ78ofg8JUGasWzWnuRlhRYHfa61cGRz1yxMK8lcqeDCt6ohDAjPXeNB10zrcHKhMpHZBT5rthSU7Le/fw0o7OLTGUJ/VCWTdVOh7xvw+1pgQO22DsvM8B4XPoE0xkpbTVvj8ZIpskCOU/CWc1MqTwzZn0nUwhXMSiGfsyMP4xl6ctniP3maaHU3jI20qlEYxgUeDSA35vkKtwQGcHtSQqqAkL/nZyxQMHvgwqcKj+VlaFwVggF93lUQYlCh8qvGxGw9+B3N9iPzQ8NhgYk/dNSh8XmAftUnlpk7So8zqW6TdfnH2+rxq8hpr/RP9McPdmc1dQnC68i3+J7N1Rd+lgdk9e+R36GDOhKRZarX/+vyD7Wf12PkvUQ8G+MW4TjK9IsHTaURVpXUvWWh47DqVJJ2nho/cpRR+JrZBW/Gu8/UvDfsfSQ=="})])}const u=a(l,[["render",d],["__file","roster-changes.html.vue"]]),m=JSON.parse('{"path":"/developer/workflows/roster-changes.html","title":"User Roster Changes","lang":"en-US","frontmatter":{"sidebarDepth":1},"headers":[],"git":{"updatedTime":1753186060000,"contributors":[{"name":"Adam Richie-Halford","username":"Adam Richie-Halford","email":"richford@users.noreply.github.com","commits":1,"url":"https://github.com/Adam Richie-Halford"},{"name":"Kyle Montville","username":"Kyle Montville","email":"kmontvil@stanford.edu","commits":2,"url":"https://github.com/Kyle Montville"},{"name":"Elijah Kelly","username":"Elijah Kelly","email":"kellyel@stanford.edu","commits":1,"url":"https://github.com/Elijah Kelly"},{"name":"Adam Richie-Halford","username":"Adam Richie-Halford","email":"richiehalford@gmail.com","commits":2,"url":"https://github.com/Adam Richie-Halford"}]},"filePathRelative":"developer/workflows/roster-changes.md"}');export{u as comp,m as data};
