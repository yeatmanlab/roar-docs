import{_ as t,r as a,o as s,c as i,a as e,b as o,d as r,e as l}from"./app-DOWqbjQg.js";const c={},d=e("h1",{id:"createadministratoraccount",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#createadministratoraccount"},[e("span",null,"createAdministratorAccount()")])],-1),u={id:"createadministratoraccount-1",tabindex:"-1"},p={class:"header-anchor",href:"#createadministratoraccount-1"},h={href:"https://github.com/yeatmanlab/roar-firebase-functions/blob/e784650492722d24069aa9b0704d1873ea5dafee/gse-roar-admin/functions/src/index.ts#L193",target:"_blank",rel:"noopener noreferrer"},m=l(`<h3 id="function-name" tabindex="-1"><a class="header-anchor" href="#function-name"><span>Function Name</span></a></h3><p><code>createAdministratorAccount</code></p><h3 id="trigger" tabindex="-1"><a class="header-anchor" href="#trigger"><span>Trigger</span></a></h3><p>This Cloud Function is triggered by an <code>onCall</code> event, meaning it is directly invoked by client applications.</p><h3 id="inputs" tabindex="-1"><a class="header-anchor" href="#inputs"><span>Inputs</span></a></h3><p>The function expects a JSON payload with the following parameters:</p><ul><li><strong>email</strong> (string): The email address for the new administrator account.</li><li><strong>name</strong> (string): The full name of the new administrator.</li><li><strong>orgs</strong> (array of strings): A list of organization IDs that the administrator is a member of.</li><li><strong>adminOrgs</strong> (array of strings): A list of organization IDs that the administrator will have administrator privileges to.</li><li><strong>isTestData</strong> (boolean, optional): A flag to indicate whether this account is being created for testing purposes. Defaults to <code>false</code> if not specified.</li><li><strong>requesterAdminUid</strong> (string): The UID of the administrator making the request, derived from <code>request.auth.uid</code>.</li></ul><p>Example JSON input:</p><div class="language-json line-numbers-mode" data-ext="json" data-title="json"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;email&quot;</span><span class="token operator">:</span> <span class="token string">&quot;new.admin@example.com&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;John Doe&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;orgs&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;org1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;org2&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;adminOrgs&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;adminOrg1&quot;</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token property">&quot;isTestData&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="outputs" tabindex="-1"><a class="header-anchor" href="#outputs"><span>Outputs</span></a></h3><p>The function returns the result from the <code>createAdminUser</code> function, which could be:</p><ul><li>A success message or data object indicating that the account has been successfully created.</li><li>An error message or object indicating that the operation failed due to reasons such as invalid input data, database errors, or permission issues.</li></ul><h3 id="description" tabindex="-1"><a class="header-anchor" href="#description"><span>Description</span></a></h3><p>The <code>createAdministratorAccount</code> function facilitates the creation of new administrator accounts within the system. It is designed to handle the input of essential user details and organizational affiliations, ensuring that new administrators are properly set up with the correct access rights. This function is particularly useful in setups where administrative privileges need to be dynamically managed based on organizational structures.</p><h3 id="error-handling" tabindex="-1"><a class="header-anchor" href="#error-handling"><span>Error Handling</span></a></h3><p>Effective error handling should be implemented to manage and log various failure scenarios, including:</p><ul><li>Invalid email format or missing information.</li><li>Database failures, such as connection issues or write failures.</li><li>Permission errors if the requestor does not have adequate rights to create new administrator accounts.</li><li>Handling of any unexpected exceptions.</li></ul><p>Errors should be logged with sufficient detail to aid in troubleshooting while avoiding the exposure of sensitive information.</p><h3 id="security-considerations" tabindex="-1"><a class="header-anchor" href="#security-considerations"><span>Security Considerations</span></a></h3><ul><li><strong>Authentication</strong>: Ensure that the request is made by an authenticated and authorized user, typically verified through Firebase Authentication.</li><li><strong>Authorization</strong>: The function should validate that the requester has administrative privileges sufficient to create new administrator accounts, especially in regard to the specified organizational affiliations (<code>adminOrgs</code>).</li><li><strong>Data Validation</strong>: All inputs should be validated for correctness and integrity before processing, including checks for valid email formats and non-null essential fields.</li></ul><h3 id="deployment" tabindex="-1"><a class="header-anchor" href="#deployment"><span>Deployment</span></a></h3><p>This function is deployed automatically using GitHub actions, whenever changes are merged into the <code>main</code> branch.</p>`,22);function g(f,v){const n=a("ExternalLinkIcon");return s(),i("div",null,[d,e("h4",u,[e("a",p,[e("span",null,[e("a",h,[o("createAdministratorAccount"),r(n)])])])]),m])}const k=t(c,[["render",g],["__file","create-administrator-account.html.vue"]]),y=JSON.parse('{"path":"/cloud-functions/gse-roar-admin/create-administrator-account.html","title":"createAdministratorAccount()","lang":"en-US","frontmatter":{},"headers":[{"level":3,"title":"Function Name","slug":"function-name","link":"#function-name","children":[]},{"level":3,"title":"Trigger","slug":"trigger","link":"#trigger","children":[]},{"level":3,"title":"Inputs","slug":"inputs","link":"#inputs","children":[]},{"level":3,"title":"Outputs","slug":"outputs","link":"#outputs","children":[]},{"level":3,"title":"Description","slug":"description","link":"#description","children":[]},{"level":3,"title":"Error Handling","slug":"error-handling","link":"#error-handling","children":[]},{"level":3,"title":"Security Considerations","slug":"security-considerations","link":"#security-considerations","children":[]},{"level":3,"title":"Deployment","slug":"deployment","link":"#deployment","children":[]}],"git":{"updatedTime":1714409659000,"contributors":[{"name":"Kyle Montville","email":"kmontvil@stanford.edu","commits":3},{"name":"Kyle","email":"ksmontville@gmail.com","commits":1}]},"filePathRelative":"cloud-functions/gse-roar-admin/create-administrator-account.md"}');export{k as comp,y as data};
